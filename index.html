<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ„›æƒ…é»˜å¥‘å¤§è€ƒé©—</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Firebase SDKs (Compat versions are easier for single HTML) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .animate-spin-slow { animation: spin 8s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Firebase åˆå§‹åŒ– ---
        // æ³¨æ„ï¼šåœ¨æ­£å¼ç’°å¢ƒä¸­ï¼Œé€™äº›è®Šæ•¸æœƒç”±åŸ·è¡Œç’°å¢ƒè‡ªå‹•æ³¨å…¥
        const firebaseConfig = JSON.parse(window.__firebase_config || '{}');
        const appId = window.__app_id || 'love-quiz-standalone';
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // --- é¡Œåº«æ•¸æ“š ---
        const poolAboutChuan = [
            { q: "ä¸‹åˆ—å“ªä¸€æ¬¾ã€ä¸æ˜¯ã€åè©®æéè‡ªå·±æœ‰åœ¨ç©çš„éŠæˆ²ï¼Ÿ", a: "åŸç¥", options: ["POE", "æœ€å¾Œç´€å…ƒ", "è‰¾çˆ¾ç™»æ³•ç’°", "åŸç¥"], rationale: "åè©®å¸¸ç© POE å’Œæœ€å¾Œç´€å…ƒï¼ŒåŸç¥ä¸åœ¨ä»–çš„åå–®å…§ã€‚" },
            { q: "åè©®æ›¾èªªéï¼Œå…¬å¸æ¡ˆå­æ¶‰åŠå“ªä¸€å€‹å ´æ‰€ï¼Ÿ", a: "å¢“åœ’", options: ["é†«é™¢", "å¢“åœ’", "å­¸æ ¡", "å·¥å» "], rationale: "å°±æ˜¯é‚£å€‹å¤å¤©æœƒè®“äººè¦ºå¾—é™°æ¶¼çš„åœ°æ–¹ã€‚" },
            { q: "åè©®å½¢å®¹å¢“åœ’åœ¨å¤å¤©çš„å„ªé»æ˜¯ï¼Ÿ", a: "å®‰éœåˆé™°æ¶¼", options: ["å®‰éœåˆé™°æ¶¼", "æœ‰å†·æ°£", "äººå°‘å¥½åœè»Š", "è¦–é‡å¥½"], rationale: "ä»–è¦ºå¾—åœ¨é‚£è£¡å·¥ä½œçš„é«”æ„Ÿæº«åº¦ç›¸å°èˆ’æœã€‚" },
            { q: "åè©®å°æ–¼å¦³ã€Œä¾†å›æ‘©æ“¦ä¹³ç·£ã€çš„å›è¦†èªæ˜¯ä»€éº¼ï¼Ÿ", a: "å¥½é¦™çš„æ„Ÿè¦º", options: ["å¾ˆä¹¾æ·¨", "å¥½é¦™çš„æ„Ÿè¦º", "æˆ‘ä¹Ÿè¦", "å¤ªèª‡å¼µ"], rationale: "é€™æ˜¯ä»–æœ€ç¶“å…¸çš„æ·±å¤œå›è¦†ã€‚" },
            { q: "åè©®å¥èº«å®Œå¾Œé€šå¸¸è‡ªå¾‹åœ°åœ¨å¹¾é»å‰è¦ç¡è¦ºï¼Ÿ", a: "22:00", options: ["21:30", "22:00", "22:30", "23:00"], rationale: "ä»–å¾ˆçœ‹é‡ç¡çœ ä¿®å¾©ï¼Œæœƒç›¡é‡åœ¨ 10 é»å‰å°±å¯¢ã€‚" },
            { q: "åè©®æ›¾è‡ªå·±èª¿éå“ªä¸€ç¨®ç¥å¥‡çµ„åˆçš„é…’ï¼Ÿ", a: "å†¬ç“œå¨å£«å¿Œ", options: ["å†¬ç“œå¨å£«å¿Œ", "æª¸æª¬å•¤é…’", "å¯æ¨‚å¨å£«å¿Œ", "èœ‚èœœå•¤é…’"], rationale: "é€™æ˜¯ä»–ç¨å‰µçš„å°å¼é¢¨æ ¼èª¿é…’ã€‚" },
            { q: "åè©®èªªã€Œè¢«ç›œã€æ˜¯ç™¼ç”Ÿåœ¨å¦³åˆ†äº«å®Œä»€éº¼ä¹‹å¾Œï¼Ÿ", a: "æ´—æ¾¡ç´°ç¯€", options: ["åˆé¤ç…§ç‰‡", "éŠæˆ²è£å‚™", "æ´—æ¾¡ç´°ç¯€", "å·¥ä½œç…©æƒ±"], rationale: "è‰²è‰²çš„å®£è¨€è¬›å®Œç«‹åˆ»è£œä¸€å¥è¢«ç›œã€‚" },
            { q: "åè©®å¥èº«æ™‚å·®é»ç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ", a: "æ˜å€’", options: ["æŠ½ç­‹", "æ˜å€’", "åå‡ºåˆé¤", "æ‰­å‚·"], rationale: "é«˜å¼·åº¦è¨“ç·´æ›¾è®“ä»–èº«é«”å‡ºç¾è² è·éé‡çš„ä¿¡è™Ÿã€‚" },
            { q: "åè©®å½¢å®¹ç¾åœ¨çš„è‡ªå·±æ˜¯ï¼Ÿ", a: "åˆè€åˆå»¢çš„è€å»¢ç‰©", options: ["é›»ç©é«˜æ‰‹", "ä¸­äºŒå°‘å¹´", "åˆè€åˆå»¢çš„è€å»¢ç‰©", "ç¤¾äº¤é”äºº"], rationale: "é€™æ˜¯åè©®æ¨™èªŒæ€§çš„å¹½é»˜è‡ªå˜²èªã€‚" },
            { q: "åè©®æœ€å¾Œå¸¸å°å¦³èªªçš„ä¸€å¥æ™šå®‰èªæ˜¯ï¼Ÿ", a: "å¿«ç¡", options: ["åŠ æ²¹", "æ™šå®‰", "å¿«ç¡", "å»é‹å‹•"], rationale: "é€™è²ã€Œå¿«ç¡ã€åŒ…å«äº†ä»–çš„é—œå¿ƒã€‚" },
            { q: "åè©®å°å¦³å·¥ä½œæŠ±æ€¨çš„æœ€å¼·æ”¯æŒæ˜¯ï¼Ÿ", a: "é™ªå¦³ä¸€èµ·ç½µ", options: ["è¬›é“ç†", "é™ªå¦³ä¸€èµ·ç½µ", "çµ¦å¦³éŒ¢", "å«å¦³å¿è€"], rationale: "é€™å°±æ˜¯å¦³å¿ƒç›®ä¸­ä»–æœ€æ£’çš„åœ°æ–¹ã€‚" },
            { q: "åè©®æåˆ°è‡ªå·±è™•ç†éå“ªä¸€ç¨®é¡å‹çš„å·¥ä½œæ¡ˆå­ï¼Ÿ", a: "æ®¯è‘¬æ¥­ç›¸é—œ", options: ["æ®¯è‘¬æ¥­ç›¸é—œ", "éŠæˆ²æ¸¬è©¦", "å»£å‘Šè¡ŒéŠ·", "é¤é£²æ¥­"], rationale: "ä»–æéæ¶‰åŠåˆ°å¢“åœ’ç›¸é—œçš„å·¥ä½œå…§å®¹ã€‚" },
            { q: "åè©®æ›¾æåˆ°ï¼Œè‡ªå·±ä¸€å¤©æ‰“éŠæˆ²æœ€ç˜‹ç‹‚çš„æ™‚å€™ï¼Œæœ€å¤šæ›¾ç¶“æŒçºŒå¤šä¹…ï¼Ÿ", a: "14 å°æ™‚", options: ["6 å°æ™‚", "8 å°æ™‚", "12 å°æ™‚", "14 å°æ™‚"], rationale: "ä»–æ›¾æ„Ÿå˜†å¹´è¼•æ™‚é«”åŠ›é©šäººï¼Œå¯ä»¥æˆ°åˆ° 14 å°æ™‚ã€‚" },
            { q: "åè©®æéå“ªä¸€å€‹å‹•æ¼«æ¢—åœ–çš„ä¾†æºï¼Ÿ", a: "åˆƒç‰™", options: ["é¬¼æ»…", "åˆƒç‰™", "é€²æ“Šçš„å·¨äºº", "å’’è¡“è¿´æˆ°"], rationale: "ä»–å°åˆƒç‰™çš„æ¢—åœ–ä¼¼ä¹æƒ…æœ‰ç¨é¾ã€‚" },
            { q: "åè©®è¦ºå¾—é€™åŠå¹´ä¾†å¦³è®Šæˆäº†ä»–çš„ï¼Ÿ", a: "å”¯ä¸€ä¸”å°ˆå±¬çš„å¯¶è²", options: ["éŠæˆ²éšŠå‹", "å”¯ä¸€ä¸”å°ˆå±¬çš„å¯¶è²", "å¥èº«å¤¥ä¼´", "å¥½å§Šå¦¹"], rationale: "é€™æ˜¯å”¯ä¸€çš„æ­£è§£ï¼Œåè©®å°±æ˜¯é€™éº¼æ„›å¦³ã€‚" }
        ];

        const poolAboutYun = [
            { q: "å­ç­ è¢«æ‰£å…¨å‹¤çš„åŸå› æ˜¯å› ç‚ºé²åˆ°äº†å¤šä¹…ï¼Ÿ", a: "2 åˆ†é˜", options: ["2 åˆ†é˜", "5 åˆ†é˜", "10 åˆ†é˜", "12 åˆ†é˜"], rationale: "å°±æ˜¯é‚£è©²æ­»çš„ 2 åˆ†é˜ï¼Œè®“å…¨å‹¤çé‡‘é£›èµ°äº†ğŸ˜­ã€‚" },
            { q: "å­ç­ è‡ªç¨±è‡ªå·±æ˜¯ä»€éº¼å¤§å¸«ï¼Ÿ", a: "èººåºŠå¤§å¸«", options: ["é›»ç©å¤§å¸«", "èººåºŠå¤§å¸«", "ç¤¾ç•œç‹", "èª²é•·"], rationale: "æ¯”èµ·é›»ç©ï¼Œå¥¹æ›´å°ˆç²¾æ–¼å¦‚ä½•èººå¾—èˆ’æœã€‚" },
            { q: "ç•¶ä½ æè­°è¦è·‘ 9000 å…¬å°ºæ™‚ï¼Œå­ç­ çš„ç¬¬ä¸€åæ‡‰æ˜¯ï¼Ÿ", a: "è¦ºå¾—æœƒæ­»", options: ["é¦¬ä¸Šç…§åš", "è¦ºå¾—æœƒæ­»", "ç„¡æ„Ÿ", "å¾ˆæœŸå¾…"], rationale: "9 å…¬é‡Œå°èººåºŠå¤§å¸«ä¾†èªªæ˜¯ç¨®é…·åˆ‘ã€‚" },
            { q: "å­ç­ çŠ’è³è‡ªå·±æœ€å¸¸ç”¨çš„å°ç¢ºå¹¸æ˜¯ï¼Ÿ", a: "å†°æ£’", options: ["è²·è¡£æœ", "å†°æ£’", "é…’", "æ—…è¡Œ"], rationale: "å¤å¤©ä¸€æ ¹å†°æ£’ï¼Œè¬äº‹çš†å¯åŸè«’ã€‚" },
            { q: "å­ç­ æœ€å®¹æ˜“ç‚ºå“ªä¸€ç¨®ç”·æ€§è§’è‰²é¡å‹æ„Ÿåˆ°å¿ƒå‹•ï¼Ÿ", a: "å¸¥å¤§å”", options: ["è˜¿è‰", "å¸¥å¤§å”", "æ­£å¤ª", "ç¸äºº"], rationale: "å¤§å”çš„é­…åŠ›å°å¥¹ä¾†èªªå®Œå…¨ç„¡æ³•æŠµæ“‹ã€‚" },
            { q: "å­ç­ æœ€å¸¸ç”¨ä¾†è¡¨é”æƒ…ç·’çš„åª’ä»‹æ˜¯ï¼Ÿ", a: "è²¼åœ–", options: ["èªéŸ³", "é•·æ–‡", "è²¼åœ–", "å·²è®€"], rationale: "å¥¹çš„è²¼åœ–åº«å°±æ˜¯å¥¹çš„éˆé­‚èªè¨€åº«ã€‚" },
            { q: "å­ç­ ç©éŠæˆ²ç©åˆ°æœ€å…¥è¿·æ™‚ï¼Œæœ€å¸¸å¿˜è¨˜åšçš„æ˜¯ï¼Ÿ", a: "ç¡è¦º", options: ["å›è¨Šæ¯", "åƒé£¯", "ç¡è¦º", "ä¸Šç­"], rationale: "æ™‚é–“å°å¥¹ä¾†èªªåœ¨éŠæˆ²ä¸­æ˜¯ä¸å­˜åœ¨çš„ã€‚" },
            { q: "å­ç­ å°éŠæˆ²ä¸­ã€Œè¾²ã€æ±è¥¿çš„æ…‹åº¦æ˜¯ï¼Ÿ", a: "å¯ä»¥æ¥å—", options: ["å®Œå…¨ä¸è¡Œ", "å¯ä»¥æ¥å—", "æ„›è¾²", "åªè¾²ä¸€é»"], rationale: "é›–ç„¶ç´¯ï¼Œä½†å¥¹ç‚ºäº†å–œæ­¡çš„æ±è¥¿é‚„æ˜¯èƒ½æ¥å—è¾²çš„éç¨‹ã€‚" },
            { q: "å­ç­ æœ€å®¹æ˜“åœ¨ä»€éº¼æ™‚å€™çªç„¶å¾ˆæƒ³èººå¹³ï¼Ÿ", a: "ä¸‹ç­å¾Œ", options: ["æ—©ä¸Š", "ä¸‹åˆ", "ä¸‹ç­å¾Œ", "å‡æ—¥"], rationale: "å¸ä¸‹ç¤¾æœƒæ­¦è£å¾Œçš„å¥¹ï¼ŒåºŠæ‰æ˜¯çµ‚é»ã€‚" },
            { q: "å­ç­ å°è‡ªå·±å®…åº¦çš„èªçŸ¥ç­‰ç´šæ˜¯ï¼Ÿ", a: "è‡­å®…", options: ["å®Œå…¨ä¸å®…", "æ™®é€š", "è‡­å®…", "åŠå®…"], rationale: "å¥¹å°æ–¼è‡ªå·±æ˜¯è‡­å®…é€™ä»¶äº‹æ„Ÿåˆ°éå¸¸è‡ªè±ªã€‚" },
            { q: "å­ç­ ä¸»ç·´çš„é³´æ½®è§’è‰²ä¸­ï¼Œçµ•å°ã€ä¸åŒ…å«ã€å“ªä¸€å€‹ï¼Ÿ", a: "å¸ƒè˜­ç‰¹", options: ["æŸ¯èŠå¡”", "å¸ƒè˜­ç‰¹", "æ•£è¯", "é•·é›¢"], rationale: "å¸ƒè˜­ç‰¹ä¸åœ¨å¥¹çš„å„ªå…ˆåå–®è£¡ã€‚" },
            { q: "å­ç­ çœ‹æ„Ÿäººçš„åŠ‡æˆ–å‹•ç•«æ™‚çš„åæ‡‰é€šå¸¸æ˜¯ï¼Ÿ", a: "çœ‹å“­", options: ["ç„¡æ„Ÿ", "åæ§½", "çœ‹å“­", "å¿«è½‰"], rationale: "ä»Šæ±çš„å‹•ç•«å°±æ›¾è®“æ„Ÿæ€§çš„å¥¹æ‰çœ¼æ·šã€‚" },
            { q: "å­ç­ å°ã€Œæœˆåº•ã€çš„æ™®éæ„Ÿå—é€šå¸¸æ˜¯ï¼Ÿ", a: "å¾ˆè¨å­", options: ["æ²’å·®", "å–œæ­¡", "å¾ˆè¨å­", "ç„¡æ„Ÿ"], rationale: "æœˆåº•çš„å·¥ä½œé‡å°å¥¹ä¾†èªªæ˜¯ç¨®æŠ˜ç£¨ã€‚" },
            { q: "å­ç­ å¯¦éš›æœ€å¾Œè·‘äº†å¤šå°‘ï¼Ÿ", a: "æ²’è·‘", options: ["9 å…¬é‡Œ", "5 å…¬é‡Œ", "2 å…¬é‡Œ", "æ²’è·‘"], rationale: "å˜´å·´èªªèªªï¼Œèº«é«”é‚„æ˜¯å¾ˆèª å¯¦åœ°ç™±åœ¨åºŠä¸Šã€‚" },
            { q: "å­ç­ è¦ºå¾—ä¸Šç­æœ€éœ€è¦å…·å‚™çš„æ˜¯ï¼Ÿ", a: "å½ˆæ€§", options: ["ç†±æƒ…", "å½ˆæ€§", "å‡é·", "å£“åŠ›"], rationale: "å¥¹æ›´åœ¨ä¹ç’°å¢ƒçš„éˆæ´»æ€§è€Œéæ­»æ¿çš„è¦å®šã€‚" }
        ];

        // --- è¼”åŠ©çµ„ä»¶ ---
        const Icon = ({ name, className, size = 24 }) => {
            useEffect(() => { lucide.createIcons(); }, [name]);
            return <i data-lucide={name} className={className} style={{ width: size, height: size }}></i>;
        };

        const LyricsConfession = () => {
            const confession = [
                "å¯¶è²ï½è¬è¬ä½ åœ¨2025å¹´èˆ‡æˆ‘ç›¸é‡ï½",
                "æ¯æ¬¡å¯¶è²éƒ½èƒ½å¥½å¥½ç†è§£æˆ‘çš„æƒ…ç·’ã€é™ªæˆ‘ä¸€èµ·å¹¼ç¨šï¼Œ",
                "å³ä½¿æ˜¯æŠ±æ€¨ç”Ÿæ´»ä¸Šçš„ä¸é–‹å¿ƒæˆ–æ˜¯ç…©æƒ±ï¼Œ",
                "å¯¶è²ä¹Ÿèƒ½æ›¿æˆ‘æƒ³è¾¦æ³•ç”šè‡³é™ªæˆ‘ä¸€èµ·ç½µğŸ¥¹",
                "é‡åˆ°ä½ æˆ‘å¾ˆé–‹å¿ƒå¾ˆé«˜èˆˆï¼Œ",
                "æœªä¾†æ–°çš„ä¸€å¹´é‚„è¦è«‹å¯¶è²å¤šå¤šæŒ‡æ•™ï½",
                "æˆ‘é‚„è¦èˆ”éå¯¶è²çš„ä¹³é ­ğŸ˜"
            ];
            const [visibleLines, setVisibleLines] = useState(0);
            useEffect(() => {
                if (visibleLines < confession.length) {
                    const timer = setTimeout(() => setVisibleLines(prev => prev + 1), 1800);
                    return () => clearTimeout(timer);
                }
            }, [visibleLines]);
            return (
                <div className="space-y-4 text-center mt-6 px-4">
                    {confession.slice(0, visibleLines).map((line, index) => (
                        <p key={index} className="text-white text-sm font-bold opacity-0 animate-[fadeIn_1s_forwards] leading-relaxed drop-shadow-sm">
                            {line}
                        </p>
                    ))}
                </div>
            );
        };

        const shuffle = (array) => {
            const newArr = [...array];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        };

        // --- ä¸»ç¨‹å¼ ---
        function App() {
            const [role, setRole] = useState(null); 
            const [view, setView] = useState('landing'); 
            const [currentIndex, setCurrentIndex] = useState(0);
            const [answers, setAnswers] = useState([]);
            const [showRationale, setShowRationale] = useState(false);
            const [showSurprise, setShowSurprise] = useState(false);

            const daysDiff = useMemo(() => {
                const start = new Date('2025-06-29');
                const end = new Date('2025-12-31');
                return Math.ceil(Math.abs(end - start) / (1000 * 60 * 60 * 24)) + 1; 
            }, []);

            const themeColor = role === 'åè©®' ? 'blue' : 'rose';
            const themeClasses = {
                bg: themeColor === 'blue' ? 'bg-[#F0F7FF]' : 'bg-[#FFF5F7]',
                header: themeColor === 'blue' ? 'from-blue-600 to-indigo-500' : 'from-rose-500 to-pink-500',
                card: themeColor === 'blue' ? 'border-blue-100 shadow-blue-100' : 'border-rose-100 shadow-rose-100',
                text: themeColor === 'blue' ? 'text-blue-600' : 'text-rose-600',
                progress: themeColor === 'blue' ? 'bg-blue-500' : 'bg-rose-500'
            };

            const currentQuestions = useMemo(() => {
                if (!role) return [];
                const pool = role === 'å­ç­ ' ? poolAboutChuan : poolAboutYun;
                return shuffle(pool).slice(0, 15);
            }, [role, view === 'landing']);

            useEffect(() => {
                const initAuth = async () => {
                    try {
                        const token = window.__initial_auth_token;
                        if (token) await auth.signInWithCustomToken(token);
                        else await auth.signInAnonymously();
                    } catch (err) { console.error(err); }
                };
                initAuth();
            }, []);

            const handleStartQuiz = (selectedRole) => {
                setRole(selectedRole);
                setCurrentIndex(0);
                setAnswers([]);
                setShowRationale(false);
                setView('quiz');
            };

            const handleAnswerSelect = (option) => {
                if (showRationale) return;
                const isCorrect = option === currentQuestions[currentIndex].a;
                setAnswers([...answers, { isCorrect }]);
                setShowRationale(true);
            };

            const nextQuestion = () => {
                if (currentIndex < currentQuestions.length - 1) {
                    setCurrentIndex(currentIndex + 1);
                    setShowRationale(false);
                } else {
                    setView('result');
                    setTimeout(() => setShowSurprise(true), 600);
                }
            };

            const finalScore = answers.filter(a => a.isCorrect).length;

            return (
                <div className={`w-full min-h-screen ${themeClasses.bg} flex flex-col items-center justify-center p-4 transition-colors duration-500`}>
                    <div className={`w-full max-w-md bg-white rounded-[3.5rem] shadow-2xl flex flex-col overflow-hidden border ${themeClasses.card}`}>
                        
                        <div className={`w-full bg-gradient-to-br ${themeClasses.header} p-10 text-white text-center shrink-0 shadow-lg relative`}>
                            <Icon name="heart" className="mb-2 fill-current mx-auto animate-pulse" size={40} />
                            <h1 className="text-2xl font-black tracking-[0.2em] mb-1">æ„›æƒ…é»˜å¥‘å¤§è€ƒé©—</h1>
                            <div className="h-1 w-12 bg-white/40 mx-auto my-3 rounded-full" />
                            <p className="text-white/90 text-[10px] font-bold tracking-widest uppercase opacity-80">Only For Ming Chuan & Tzu Yun</p>
                        </div>

                        <div className="flex-1 p-8 overflow-y-auto max-h-[72vh] relative">
                            {view === 'landing' && (
                                <div className="space-y-12 py-6 text-center text-slate-800">
                                    <div className="space-y-4">
                                        <p className="font-black text-xl tracking-tight">èª°è¦ä¾†æ¥å—å¤§è€ƒé©—å‘¢ï¼Ÿ</p>
                                        <div className="bg-slate-50/80 p-6 rounded-[2rem] border border-slate-100 shadow-inner">
                                            <p className="text-slate-500 text-sm leading-relaxed mb-4">
                                                å¦³/ä½  çœŸçš„äº†è§£å°æ–¹çš„<br/>å·¥ä½œã€éŠæˆ²èˆ‡ç”Ÿæ´»ç¿’æ…£å—ï¼Ÿ
                                            </p>
                                            <p className="text-rose-500 font-black text-sm mb-2">ç­”å…¨å°æœ‰çå‹µğŸ˜ˆç­”éŒ¯ä¸€é¡Œæœ‰æ‡²ç½°ğŸ˜ˆ</p>
                                        </div>
                                    </div>
                                    <div className="space-y-5 px-2">
                                        <button onClick={() => handleStartQuiz('å­ç­ ')} className="w-full flex items-center p-7 rounded-[2.5rem] border-2 border-rose-50 hover:border-rose-400 hover:bg-rose-50 transition-all bg-white shadow-sm">
                                            <div className="w-16 h-16 bg-rose-100 rounded-[1.5rem] flex items-center justify-center mr-5 shadow-sm"><Icon name="user" className="text-rose-500" size={36} /></div>
                                            <div className="flex-1 text-left font-black text-lg">æˆ‘æ˜¯ å­ç­ </div>
                                            <Icon name="chevron-right" className="text-rose-300" />
                                        </button>
                                        <button onClick={() => handleStartQuiz('åè©®')} className="w-full flex items-center p-7 rounded-[2.5rem] border-2 border-blue-50 hover:border-blue-400 hover:bg-blue-50 transition-all bg-white shadow-sm">
                                            <div className="w-16 h-16 bg-blue-100 rounded-[1.5rem] flex items-center justify-center mr-5 shadow-sm"><Icon name="user" className="text-blue-500" size={36} /></div>
                                            <div className="flex-1 text-left font-black text-lg">æˆ‘æ˜¯ åè©®</div>
                                            <Icon name="chevron-right" className="text-blue-300" />
                                        </button>
                                    </div>
                                </div>
                            )}

                            {view === 'quiz' && (
                                <div className="space-y-10">
                                    <div className="flex items-center gap-6 px-2">
                                        <div className="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden shadow-inner">
                                            <div className={`h-full ${themeClasses.progress} transition-all duration-1000 ease-out`} style={{ width: `${((currentIndex + 1) / 15) * 100}%` }} />
                                        </div>
                                        <span className={`text-[12px] font-black tracking-tighter uppercase ${themeClasses.text}`}>Q {currentIndex + 1} / 15</span>
                                    </div>
                                    <h2 className="text-xl font-black text-slate-800 leading-relaxed text-center px-4">{currentQuestions[currentIndex].q}</h2>
                                    <div className="space-y-4 pt-4 px-2">
                                        {currentQuestions[currentIndex].options.map((option, idx) => {
                                            const isCorrect = option === currentQuestions[currentIndex].a;
                                            const showResult = showRationale;
                                            let btnStyle = "w-full p-6 rounded-[2rem] border-2 text-center transition-all text-sm font-bold shadow-sm relative overflow-hidden ";
                                            if (!showResult) btnStyle += `border-slate-100 bg-white hover:border-${themeColor}-300 hover:shadow-md active:scale-[0.96] text-slate-700`;
                                            else {
                                                if (isCorrect) btnStyle += "border-green-500 bg-green-50 text-green-700 ring-4 ring-green-100 z-10 scale-105 shadow-xl";
                                                else btnStyle += `border-slate-50 opacity-20 grayscale scale-95 text-slate-400`;
                                            }
                                            return <button key={idx} disabled={showResult} onClick={() => handleAnswerSelect(option)} className={btnStyle}>{option}</button>;
                                        })}
                                    </div>
                                    {showRationale && (
                                        <div className={`mt-12 p-8 ${themeColor === 'blue' ? 'bg-blue-50/80' : 'bg-rose-50/80'} backdrop-blur-sm border border-slate-100 rounded-[2.5rem] shadow-inner mx-2`}>
                                            <div className="flex flex-col items-center text-center gap-5">
                                                <Icon name="message-circle" className={`${themeClasses.text}`} size={28} />
                                                <p className="text-sm text-slate-700 font-bold leading-loose italic">ã€Œ{currentQuestions[currentIndex].rationale}ã€</p>
                                                <button onClick={nextQuestion} className="mt-4 w-full bg-slate-800 text-white py-5 rounded-[1.8rem] font-black flex items-center justify-center text-md shadow-2xl active:scale-95">
                                                    {currentIndex === 14 ? "æŸ¥çœ‹æœ€çµ‚å›å ±" : "ä¸‹ä¸€é¡Œï¼ŒæŒ‘æˆ°ç¹¼çºŒ"}
                                                    <Icon name="chevron-right" className="ml-2" />
                                                </button>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            )}

                            {view === 'result' && (
                                <div className="text-center space-y-12 py-8">
                                    <div className="inline-block relative">
                                        <div className="absolute inset-0 bg-yellow-400 blur-[50px] opacity-20 rounded-full animate-pulse" />
                                        {finalScore === 15 ? <Icon name="sparkles" className="text-yellow-400 w-36 h-36 mx-auto relative z-10 drop-shadow-2xl" /> : <Icon name="skull" className="text-slate-400 w-32 h-32 mx-auto relative z-10 drop-shadow-xl" />}
                                        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pt-6 z-20"><span className={`text-5xl font-black ${finalScore === 15 ? 'text-yellow-600' : 'text-slate-600'}`}>{finalScore}</span></div>
                                    </div>
                                    <div className="space-y-4 px-6">
                                        <h2 className="text-3xl font-black text-slate-800 tracking-tight">{finalScore === 15 ? "100% å®Œç¾çš„é»˜å¥‘ï¼" : "å™¢ä¸ï¼Œçœ‹ä¾†é‚„å·®ä¸€é»é»"}</h2>
                                        <div className="bg-slate-50 p-6 rounded-[2rem] border border-slate-100 shadow-inner">
                                            <p className="text-lg font-black tracking-tight leading-relaxed">{finalScore === 15 ? <span className="text-rose-600">ä½ å¤ªæ£’äº†ï¼<br/>æº–å‚™å¥½å¥½æ¥ğŸ¥µå—ğŸ¥µçğŸ¥µå‹µğŸ¥µ</span> : <span className="text-slate-700">ä½ å®Œè›‹äº†ï¼<br/>æº–å‚™å¥½å¥½æ¥ğŸ¥µå—ğŸ¥µæ‡²ğŸ¥µç½°ğŸ¥µ</span>}</p>
                                        </div>
                                    </div>
                                    {showSurprise && (
                                        <div className="bg-gradient-to-br from-rose-600 via-rose-500 to-pink-500 p-10 rounded-[3.5rem] text-white shadow-2xl border-8 border-white/10 relative overflow-hidden mx-2 shadow-rose-200">
                                            <Icon name="party-popper" className="mx-auto mb-2 animate-bounce" size={64} />
                                            <h3 className="text-2xl font-black mb-1 tracking-[0.4em] uppercase">Love Milestones ğŸŠ</h3>
                                            <div className="text-[13px] text-rose-50 leading-[2] font-bold">
                                                <p className="opacity-80">2025/06/29 â†’ Today</p>
                                                <p className="mt-5 px-2 text-sm text-center">è‡ªå¾åœ¨é‚£å¤©æ±ºå®šæˆç‚ºå½¼æ­¤çš„å”¯ä¸€ï¼Œåˆ°ä»Šå¤©...</p>
                                                <div className="my-8 space-y-1">
                                                    <p className="text-[11px] opacity-80 font-black tracking-widest">æˆ‘å€‘å·²ç¶“æ”œæ‰‹èµ°éäº†</p>
                                                    <div className="flex items-center justify-center gap-2">
                                                        <span className="text-white text-8xl font-black drop-shadow-xl tracking-tighter">{daysDiff}</span>
                                                        <span className="text-2xl font-black mt-8 tracking-widest">å¤©</span>
                                                    </div>
                                                    <div className="mt-8 mb-4 bg-white/20 py-4 px-6 rounded-full inline-block border border-white/30 animate-pulse shadow-lg">
                                                        <span className="text-xl font-black tracking-[0.2em]">ç¥æˆ‘å€‘åœ¨ä¸€èµ·åŠå¹´å¿«æ¨‚ï¼</span>
                                                    </div>
                                                </div>
                                                <div className="h-px w-16 bg-white/40 mx-auto my-10" />
                                                <div className="bg-black/10 p-8 rounded-[3rem] backdrop-blur-md border border-white/10 shadow-inner">
                                                    <Icon name="music" className="mx-auto mb-6 opacity-40 animate-spin-slow" size={24} />
                                                    <LyricsConfession />
                                                </div>
                                            </div>
                                            <div className="mt-14 flex justify-center gap-6">
                                                <Icon name="heart" className="fill-current animate-ping opacity-70" size={24} />
                                                <Icon name="heart" className="fill-current text-white" size={40} />
                                                <Icon name="heart" className="fill-current animate-ping opacity-70" size={24} />
                                            </div>
                                        </div>
                                    )}
                                    <div className="space-y-5 pt-8 px-6 pb-4">
                                        <button onClick={() => window.location.reload()} className="w-full bg-slate-100 text-slate-600 py-6 rounded-[2rem] font-black text-sm flex items-center justify-center shadow-inner">
                                            <Icon name="rotate-ccw" className="mr-2" size={20} />ä¸æœæ°£ï¼Ÿé‡æ–°æŒ‘æˆ°
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                        <div className="p-8 bg-slate-50 text-center border-t border-slate-100 shrink-0">
                            <p className="text-[10px] font-black text-slate-300 uppercase tracking-[0.6em]">Since 2025.06.29 â€§ åè©® & å­ç­  â€§ Eternal Love</p>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

